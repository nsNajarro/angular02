{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@modules/mascotas/services/mascotasserv.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ListarComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"app-card\", 5);\n    i0.ɵɵlistener(\"eliminar\", function ListarComponent_ng_container_6_Template_app_card_eliminar_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.eliminarMascota($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const obj_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"obj\", obj_r1);\n  }\n}\nexport class ListarComponent {\n  constructor(mascotasservService, toastr) {\n    this.mascotasservService = mascotasservService;\n    this.toastr = toastr;\n    this.mascotas = []; // array de mascotas\n    this.parametroBuscar = ''; //parámetro de búsqueda\n  }\n\n  ngOnInit() {\n    this.mascotasservService.mascotas.subscribe(resp => {\n      this.mascotas = resp;\n    });\n  }\n  buscar() {\n    this.mascotasservService.buscarMascotas(this.parametroBuscar).subscribe(resp => {\n      this.mascotas = resp;\n    });\n  }\n  eliminarMascota(pet) {\n    Swal.fire({\n      title: '¿Estas Seguro de eliminar?',\n      text: `Esta Seguro de borrar a${pet.raza}`,\n      icon: 'question',\n      showCancelButton: true\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.mascotas = this.mascotas.filter(objMascota => objMascota.id !== pet.id);\n        this.mascotasservService.borrarMascotas(pet).subscribe(resp => {\n          this.toastr.success('El registro fue eliminado con éxito', 'Eliminado', {\n            positionClass: 'toast-top-right'\n          });\n        }, err => {\n          Swal.fire({\n            icon: 'error',\n            title: 'Error',\n            text: err.error.msg\n          });\n        });\n      }\n    });\n  }\n}\nListarComponent.ɵfac = function ListarComponent_Factory(t) {\n  return new (t || ListarComponent)(i0.ɵɵdirectiveInject(i1.MascotasservService), i0.ɵɵdirectiveInject(i2.ToastrService));\n};\nListarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListarComponent,\n  selectors: [[\"app-listar\"]],\n  decls: 9,\n  vars: 2,\n  consts: [[1, \"d-flex\", \"p-2\", \"m-5\"], [1, \"container\"], [\"type\", \"text\", \"placeholder\", \"Buscar carta\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"row\", \"row-cols-1\", \"row-cols-md-3\", \"row-cols-xl-5\", \"justify-content-center\"], [4, \"ngFor\", \"ngForOf\"], [3, \"obj\", \"eliminar\"]],\n  template: function ListarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵelementStart(3, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ListarComponent_Template_input_ngModelChange_3_listener($event) {\n        return ctx.parametroBuscar = $event;\n      })(\"keyup.enter\", function ListarComponent_Template_input_keyup_enter_3_listener() {\n        return ctx.buscar();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"hr\");\n      i0.ɵɵelementStart(5, \"div\", 3);\n      i0.ɵɵtemplate(6, ListarComponent_ng_container_6_Template, 2, 1, \"ng-container\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"hr\")(8, \"br\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.parametroBuscar);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.mascotas);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAIA,OAAOA,IAAI,MAAM,aAAa;;;;;;;;;ICS5BC,6BAA2C;IACzCA,mCAA0D;IAArCA;MAAAA;MAAA;MAAA,OAAYA,6CAAuB;IAAA,EAAC;IAACA,iBAAW;IACvEA,0BAAe;;;;IADHA,eAAW;IAAXA,4BAAW;;;ADHzB,OAAM,MAAOC,eAAe;EAI1BC,YAAoBC,mBAAwC,EAAUC,MAAoB;IAAtE,wBAAmB,GAAnBD,mBAAmB;IAA+B,WAAM,GAANC,MAAM;IAH5E,aAAQ,GAAgB,EAAE,EAAC;IAC3B,oBAAe,GAAW,EAAE,CAAC,CAAC;EAG9B;;EAGAC,QAAQ;IACN,IAAI,CAACF,mBAAmB,CAACG,QAAQ,CAACC,SAAS,CAAEC,IAAI,IAAI;MACnD,IAAI,CAACF,QAAQ,GAAGE,IAAI;IACtB,CAAC,CAAC;EACJ;EAEAC,MAAM;IACJ,IAAI,CAACN,mBAAmB,CAACO,cAAc,CAAC,IAAI,CAACC,eAAe,CAAC,CAACJ,SAAS,CAAEC,IAAI,IAAG;MAC9E,IAAI,CAACF,QAAQ,GAAGE,IAAI;IACtB,CAAC,CAAC;EACJ;EAEAI,eAAe,CAACC,GAAa;IAC3Bd,IAAI,CAACe,IAAI,CAAC;MACRC,KAAK,EAAE,4BAA4B;MACnCC,IAAI,EAAE,0BAA0BH,GAAG,CAACI,IAAI,EAAE;MAC1CC,IAAI,EAAE,UAAU;MAChBC,gBAAgB,EAAE;KACnB,CAAC,CAACC,IAAI,CAAEC,MAAU,IAAI;MACrB,IAAGA,MAAM,CAACC,WAAW,EAAE;QACrB,IAAI,CAAChB,QAAQ,GAAC,IAAI,CAACA,QAAQ,CAACiB,MAAM,CAAEC,UAAoB,IAAGA,UAAU,CAACC,EAAE,KAAGZ,GAAG,CAACY,EAAE,CAAC;QAElF,IAAI,CAACtB,mBAAmB,CAACuB,cAAc,CAACb,GAAG,CAAC,CAC3CN,SAAS,CAAEC,IAAQ,IAAG;UACrB,IAAI,CAACJ,MAAM,CAACuB,OAAO,CAAC,qCAAqC,EAAE,WAAW,EACtE;YAACC,aAAa,EAAE;UAAiB,CAAC,CAAC;QAErC,CAAC,EAAEC,GAAO,IAAG;UACX9B,IAAI,CAACe,IAAI,CAAC;YACRI,IAAI,EAAE,OAAO;YACbH,KAAK,EAAE,OAAO;YACdC,IAAI,EAAEa,GAAG,CAACC,KAAK,CAACC;WACjB,CAAC;QACJ,CAAC,CAAC;;IAEN,CAAC,CAAC;EACJ;;AA5CW9B,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAA+B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCV5BpC,yBAAkC;MAClCA,8BAAuB;MACvBA,qBAAM;MACNA,gCAMC;MAHCA;QAAA;MAAA,EAA6B;QAAA,OACdqC,YAAQ;MAAA,EADM;MAH/BrC,iBAMC;MACDA,qBAAM;MACNA,8BAA+E;MAC7EA,kFAEe;MACjBA,iBAAM;MACNA,qBAAI;MAEJA,iBAAM;;;MAZJA,eAA6B;MAA7BA,6CAA6B;MAMCA,eAAW;MAAXA,sCAAW","names":["Swal","i0","ListarComponent","constructor","mascotasservService","toastr","ngOnInit","mascotas","subscribe","resp","buscar","buscarMascotas","parametroBuscar","eliminarMascota","pet","fire","title","text","raza","icon","showCancelButton","then","result","isConfirmed","filter","objMascota","id","borrarMascotas","success","positionClass","err","error","msg","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\luis2\\Downloads\\guia\\angular02\\src\\app\\modules\\mascotas\\pages\\listar\\listar.component.ts","C:\\Users\\luis2\\Downloads\\guia\\angular02\\src\\app\\modules\\mascotas\\pages\\listar\\listar.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { IMascotas } from '@modules/mascotas/interface/mascotas.interface';\nimport { MascotasservService } from '@modules/mascotas/services/mascotasserv.service';\nimport { ToastrService } from 'ngx-toastr';\nimport Swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-listar',\n  templateUrl: './listar.component.html',\n  styleUrls: ['./listar.component.scss']\n})\nexport class ListarComponent implements OnInit {\n  mascotas: IMascotas[] = [] // array de mascotas\n  parametroBuscar: string = ''; //parámetro de búsqueda\n\n  constructor(private mascotasservService: MascotasservService, private toastr:ToastrService) {\n  }\n\n\n  ngOnInit(): void {\n    this.mascotasservService.mascotas.subscribe((resp) =>{\n      this.mascotas = resp;\n    });\n  }\n\n  buscar(): void { //método para buscar\n    this.mascotasservService.buscarMascotas(this.parametroBuscar).subscribe((resp)=>{\n      this.mascotas = resp;\n    });\n  }\n\n  eliminarMascota(pet:IMascotas){\n    Swal.fire({\n      title: '¿Estas Seguro de eliminar?',\n      text: `Esta Seguro de borrar a${pet.raza}`,\n      icon: 'question',\n      showCancelButton: true\n    }).then((result:any) =>{\n      if(result.isConfirmed) {\n        this.mascotas=this.mascotas.filter((objMascota:IMascotas)=>objMascota.id!==pet.id)\n\n        this.mascotasservService.borrarMascotas(pet)\n        .subscribe((resp:any)=>{\n          this.toastr.success('El registro fue eliminado con éxito', 'Eliminado',\n          {positionClass: 'toast-top-right'});\n\n        },(err:any)=>{\n          Swal.fire({\n            icon: 'error',\n            title: 'Error',\n            text: err.error.msg,\n          });\n        });\n      }\n    })\n  }\n\n}\n","<!--<p>listar works!</p>-->\n<div class=\"d-flex p-2 m-5\"></div>\n<div class=\"container\">\n<hr />\n<input type=\"text\"\n  class=\"form-control\"\n  placeholder=\"Buscar carta\"\n  [(ngModel)]=\"parametroBuscar\"\n  (keyup.enter)=\"buscar()\"\n\n>\n<hr />\n<div class=\"row row-cols-1 row-cols-md-3 row-cols-xl-5 justify-content-center\">\n  <ng-container *ngFor=\"let obj of mascotas\">\n    <app-card [obj]=\"obj\"(eliminar)=\"eliminarMascota($event)\"></app-card>\n  </ng-container>\n</div>\n<hr>\n<br>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}